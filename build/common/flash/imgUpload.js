steel.d("utils/kit/extra/swfobject",[],function(e,t,n){STK.register("utils.kit.extra.swfobject",function(e){var t=function(){function n(){if(!z){try{var t=P.getElementsByTagName("body")[0].appendChild(g("span"));t.parentNode.removeChild(t)}catch(n){return void e.log("error 3 : ",n.message)}z=!0;for(var i=U.length,a=0;i>a;a++)U[a]()}}function i(e){z?e():U[U.length]=e}function a(e){if(typeof M.addEventListener!=L)M.addEventListener("load",e,!1);else if(typeof P.addEventListener!=L)P.addEventListener("load",e,!1);else if(typeof M.attachEvent!=L)m(M,"onload",e);else if("function"==typeof M.onload){var t=M.onload;M.onload=function(){t(),e()}}else M.onload=e}function r(){W?o():s()}function o(){var e=P.getElementsByTagName("body")[0],t=g(x);t.setAttribute("type",j);var n=e.appendChild(t);if(n){var i=0;!function(){if(typeof n.GetVariable!=L){var a=n.GetVariable("$version");a&&(a=a.split(" ")[1].split(","),J.pv=[parseInt(a[0],10),parseInt(a[1],10),parseInt(a[2],10)])}else if(10>i)return i++,void setTimeout(arguments.callee,10);e.removeChild(t),n=null,s()}()}else s()}function s(){var e=V.length;if(e>0)for(var t=0;e>t;t++){var n=V[t].id,i=V[t].callbackFn,a={success:!1,id:n};if(J.pv[0]>0){var r=w(n);if(r)if(!b(V[t].swfVersion)||J.wk&&J.wk<312)if(V[t].expressInstall&&c()){var o={};o.data=V[t].expressInstall,o.width=r.getAttribute("width")||"0",o.height=r.getAttribute("height")||"0",r.getAttribute("class")&&(o.styleclass=r.getAttribute("class")),r.getAttribute("align")&&(o.align=r.getAttribute("align"));for(var s={},u=r.getElementsByTagName("param"),p=u.length,v=0;p>v;v++)"movie"!=u[v].getAttribute("name").toLowerCase()&&(s[u[v].getAttribute("name")]=u[v].getAttribute("value"));d(o,s,n,i)}else f(r),i&&i(a);else C(n,!0),i&&(a.success=!0,a.ref=l(n),i(a))}else if(C(n,!0),i){var h=l(n);h&&typeof h.SetVariable!=L&&(a.success=!0,a.ref=h),i(a)}}}function l(e){var t=null,n=w(e);if(n&&"OBJECT"==n.nodeName)if(typeof n.SetVariable!=L)t=n;else{var i=n.getElementsByTagName(x)[0];i&&(t=i)}return t}function c(){return!G&&b("6.0.65")&&(J.win||J.mac)&&!(J.wk&&J.wk<312)}function d(e,t,n,i){G=!0,k=i||null,F={success:!1,id:n};var a=w(n);if(a){"OBJECT"==a.nodeName?(T=u(a),I=null):(T=a,I=n),e.id=B,(typeof e.width==L||!/%$/.test(e.width)&&parseInt(e.width,10)<310)&&(e.width="310"),(typeof e.height==L||!/%$/.test(e.height)&&parseInt(e.height,10)<137)&&(e.height="137"),P.title=P.title.slice(0,47)+" - Flash Player Installation";var r=J.ie&&J.win?"ActiveX":"PlugIn",o="MMredirectURL="+M.location.toString().replace(/&/g,"%26")+"&MMplayerType="+r+"&MMdoctitle="+P.title;if(typeof t.flashvars!=L?t.flashvars+="&"+o:t.flashvars=o,J.ie&&J.win&&4!=a.readyState){var s=g("div");n+="SWFObjectNew",s.setAttribute("id",n),a.parentNode.insertBefore(s,a),a.style.display="none",function(){4==a.readyState?a.parentNode.removeChild(a):setTimeout(arguments.callee,10)}()}p(e,t,n)}}function f(e){if(J.ie&&J.win&&4!=e.readyState){var t=g("div");e.parentNode.insertBefore(t,e),t.parentNode.replaceChild(u(e),t),e.style.display="none",function(){4==e.readyState?e.parentNode.removeChild(e):setTimeout(arguments.callee,10)}()}else e.parentNode.replaceChild(u(e),e)}function u(e){var t=g("div");if(J.win&&J.ie)t.innerHTML=e.innerHTML;else{var n=e.getElementsByTagName(x)[0];if(n){var i=n.childNodes;if(i)for(var a=i.length,r=0;a>r;r++)1==i[r].nodeType&&"PARAM"==i[r].nodeName||8==i[r].nodeType||t.appendChild(i[r].cloneNode(!0))}}return t}function p(e,t,n){var i,a=w(n);if(J.wk&&J.wk<312)return i;if(a)if(typeof e.id==L&&(e.id=n),J.ie&&J.win){var r="";for(var o in e)e[o]!=Object.prototype[o]&&("data"==o.toLowerCase()?t.movie=e[o]:"styleclass"==o.toLowerCase()?r+=' class="'+e[o]+'"':"classid"!=o.toLowerCase()&&(r+=" "+o+'="'+e[o]+'"'));var s="";for(var l in t)t[l]!=Object.prototype[l]&&(s+='<param name="'+l+'" value="'+t[l]+'" />');a.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+r+">"+s+"</object>",D[D.length]=e.id,i=w(e.id)}else{var c=g(x);c.setAttribute("type",j);for(var d in e)e[d]!=Object.prototype[d]&&("styleclass"==d.toLowerCase()?c.setAttribute("class",e[d]):"classid"!=d.toLowerCase()&&c.setAttribute(d,e[d]));for(var f in t)t[f]!=Object.prototype[f]&&"movie"!=f.toLowerCase()&&v(c,f,t[f]);a.parentNode.replaceChild(c,a),i=c}return i}function v(e,t,n){var i=g("param");i.setAttribute("name",t),i.setAttribute("value",n),e.appendChild(i)}function h(e){var t=w(e);t&&"OBJECT"==t.nodeName&&(J.ie&&J.win?(t.style.display="none",function(){4==t.readyState?y(e):setTimeout(arguments.callee,10)}()):t.parentNode.removeChild(t))}function y(e){var t=w(e);if(t){for(var n in t)"function"==typeof t[n]&&(t[n]=null);t.parentNode.removeChild(t)}}function w(t){var n=null;try{n=P.getElementById(t)}catch(i){e.log("error 4 : ",i.message)}return n}function g(e){return P.createElement(e)}function m(e,t,n){e.attachEvent(t,n),R[R.length]=[e,t,n]}function b(e){var t=J.pv,n=e.split(".");return n[0]=parseInt(n[0],10),n[1]=parseInt(n[1],10)||0,n[2]=parseInt(n[2],10)||0,t[0]>n[0]||t[0]==n[0]&&t[1]>n[1]||t[0]==n[0]&&t[1]==n[1]&&t[2]>=n[2]?!0:!1}function S(e,t,n,i){if(!J.ie||!J.mac){var a=P.getElementsByTagName("head")[0];if(a){var r=n&&"string"==typeof n?n:"screen";if(i&&(A=null,N=null),!A||N!=r){var o=g("style");o.setAttribute("type","text/css"),o.setAttribute("media",r),A=a.appendChild(o),J.ie&&J.win&&typeof P.styleSheets!=L&&P.styleSheets.length>0&&(A=P.styleSheets[P.styleSheets.length-1]),N=r}J.ie&&J.win?A&&typeof A.addRule==x&&A.addRule(e,t):A&&typeof P.createTextNode!=L&&A.appendChild(P.createTextNode(e+" {"+t+"}"))}}}function C(e,t){if(K){var n=t?"visible":"hidden";z&&w(e)?w(e).style.visibility=n:S("#"+e,"visibility:"+n)}}function E(e){var t=/[\\\"<>\.;]/,n=null!=t.exec(e);return n&&typeof encodeURIComponent!=L?encodeURIComponent(e):e}{var T,I,k,F,A,N,L="undefined",x="object",_="Shockwave Flash",O="ShockwaveFlash.ShockwaveFlash",j="application/x-shockwave-flash",B="SWFObjectExprInst",$="onreadystatechange",M=window,P=document,H=navigator,W=!1,U=[r],V=[],D=[],R=[],z=!1,G=!1,K=!0,J=function(){var t=typeof P.getElementById!=L&&typeof P.getElementsByTagName!=L&&typeof P.createElement!=L,n=H.userAgent.toLowerCase(),i=H.platform.toLowerCase(),a=/win/.test(i?i:n),r=/mac/.test(i?i:n),o=/webkit/.test(n)?parseFloat(n.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,s=!1,l=[0,0,0],c=null;if(typeof H.plugins!=L&&typeof H.plugins[_]==x)c=H.plugins[_].description,!c||typeof H.mimeTypes!=L&&H.mimeTypes[j]&&!H.mimeTypes[j].enabledPlugin||(W=!0,s=!1,c=c.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),l[0]=parseInt(c.replace(/^(.*)\..*$/,"$1"),10),l[1]=parseInt(c.replace(/^.*\.(.*)\s.*$/,"$1"),10),l[2]=/[a-zA-Z]/.test(c)?parseInt(c.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof M.ActiveXObject!=L)try{var d=new ActiveXObject(O);d&&(c=d.GetVariable("$version"),c&&(s=!0,c=c.split(" ")[1].split(","),l=[parseInt(c[0],10),parseInt(c[1],10),parseInt(c[2],10)]))}catch(f){e.log("error 1 : ",f.message)}return{w3:t,pv:l,wk:o,ie:s,win:a,mac:r}}();!function(){J.w3&&((typeof P.readyState!=L&&"complete"==P.readyState||typeof P.readyState==L&&(P.getElementsByTagName("body")[0]||P.body))&&n(),z||(typeof P.addEventListener!=L&&P.addEventListener("DOMContentLoaded",n,!1),J.ie&&J.win&&(P.attachEvent($,function(){"complete"==P.readyState&&(P.detachEvent($,arguments.callee),n())}),M==top&&!function(){if(!z){try{P.documentElement.doScroll("left")}catch(t){return e.log("error 2 : ",t.message),void setTimeout(arguments.callee,0)}n()}}()),J.wk&&!function(){return z?void 0:/loaded|complete/.test(P.readyState)?void n():void setTimeout(arguments.callee,0)}(),a(n)))}(),function(){J.ie&&J.win&&window.attachEvent("onunload",function(){for(var e=R.length,n=0;e>n;n++)R[n][0].detachEvent(R[n][1],R[n][2]);for(var i=D.length,a=0;i>a;a++)h(D[a]);for(var r in J)J[r]=null;J=null;for(var o in t)t[o]=null;t=null})}()}return{registerObject:function(e,t,n,i){if(J.w3&&e&&t){var a={};a.id=e,a.swfVersion=t,a.expressInstall=n,a.callbackFn=i,V[V.length]=a,C(e,!1)}else i&&i({success:!1,id:e})},getObjectById:function(e){return J.w3?l(e):void 0},embedSWF:function(e,t,n,a,r,o,s,l,f,u){var v={success:!1,id:t};J.w3&&!(J.wk&&J.wk<312)&&e&&t&&n&&a&&r?(C(t,!1),i(function(){n+="",a+="";var i={};if(f&&typeof f===x)for(var h in f)i[h]=f[h];i.data=e,i.width=n,i.height=a;var y={};if(l&&typeof l===x)for(var w in l)y[w]=l[w];if(s&&typeof s===x)for(var g in s)typeof y.flashvars!=L?y.flashvars+="&"+g+"="+s[g]:y.flashvars=g+"="+s[g];if(b(r)){var m=p(i,y,t);i.id==t&&C(t,!0),v.success=!0,v.ref=m}else{if(o&&c())return i.data=o,void d(i,y,t,u);C(t,!0)}u&&u(v)})):u&&u(v)},switchOffAutoHideShow:function(){K=!1},ua:J,getFlashPlayerVersion:function(){return{major:J.pv[0],minor:J.pv[1],release:J.pv[2]}},hasFlashPlayerVersion:b,createSWF:function(e,t,n){return J.w3?p(e,t,n):void 0},showExpressInstall:function(e,t,n,i){J.w3&&c()&&d(e,t,n,i)},removeSWF:function(e){J.w3&&h(e)},createCSS:function(e,t,n,i){J.w3&&S(e,t,n,i)},addDomLoadEvent:i,addLoadEvent:a,getQueryParamValue:function(e){var t=P.location.search||P.location.hash;if(t){if(/\?/.test(t)&&(t=t.split("?")[1]),null==e)return E(t);for(var n=t.split("&"),i=0;i<n.length;i++)if(n[i].substring(0,n[i].indexOf("="))==e)return E(n[i].substring(n[i].indexOf("=")+1))}return""},expressInstallCallback:function(){if(G){var e=w(B);e&&T&&(e.parentNode.replaceChild(T,e),I&&(C(I,!0),J.ie&&J.win&&(T.style.display="block")),k&&k(F)),G=!1}}}}();return t})}),steel.d("common/flash/imgUpload",["utils/kit/extra/swfobject"],function(e,t,n){e("utils/kit/extra/swfobject"),STK.register("common.flash.imgUpload",function(e){var t=document.documentElement,n=document.body,i={getScroll:function(){var e,i,a,r;return t&&t.scrollTop?(e=t.scrollTop,i=t.scrollLeft,a=t.scrollWidth,r=t.scrollHeight):n&&(e=n.scrollTop,i=n.scrollLeft,a=n.scrollWidth,r=n.scrollHeight),{t:e,l:i,w:a,h:r}},getScreen:function(){var n={};return e.IE?(n.w=t.clientWidth,n.h=t.clientHeight):(n.w=window.innerWidth,n.h=window.innerHeight),n}},a=function(e){var t={cn:"zh_CN",tw:"zh_TW"};return e=e.toLowerCase(),e=e.replace(/zh-/g,""),t[e]};return function(t,r){var o,s,l={version:$CONFIG.version,swf_path:$CONFIG.jsPath+"enterprise/static/swf/img/",service:t.service,ed_swf:t.swf||"PhotoEditor.swf",exp_swf:"expressInstall.swf",h:t.h||385,w:t.w||528,f_version:"10.0.0",channel:t.id+"_channel",id_panel:t.id+"_panel",id_swf:t.id+"_swf"},c={},d={init:function(){r.init&&r.init(c,t)},setHeight:function(t){e.IE||(u.getFlash(l.id_swf).height=t)},upComplate:function(e){t.sucess&&t.sucess(e),o.style.display="none",c.destroy()},closeEditor:function(){o.style.display="none",c.destroy(),r.close&&r.close(c,t)},suda:function(e){SUDA&&SUDA.uaTrack&&SUDA.uaTrack("meitu","v4||"+e)}},f={version:l.version,language:a($CONFIG.lang),channel:l.channel,JSHandler:"STK.core.util.listener.fire",initFun:"init",changeFlashHeightFun:"setHeight",uploadCompleteFun:"upComplate",closePhotoEditorFun:"closeEditor",suda:"suda"},u={init:function(){t.id&&(o=e.E(l.id_panel),s=e.E(l.id_swf),o||(o=e.C("div"),o.id=l.id_panel,n.appendChild(o)),s||(s=e.C("div"),s.id=l.id_swf,o.appendChild(s)),o.style.display="none",u.getFlash(l.id_swf)||u.build())},checkAction:function(e,t){var n=STK.core.util.listener.list;return!(!n[e]||!n[e][t])},bindEvt:function(e){for(key in e)d[e[key]]&&!u.checkAction(l.channel,e[key])&&STK.core.util.listener.register(l.channel,e[key],d[e[key]])},build:function(){var n={menu:"true",scale:"noScale",allowFullscreen:"true",allowScriptAccess:"always",bgcolor:"#FFFFFF",wmode:"transparent",base:l.swf_path},i={id:t.id};u.bindEvt(f),e.utils.kit.extra.swfobject.embedSWF(l.swf_path+l.ed_swf+"?version="+l.version,l.id_swf,l.w,l.h,l.f_version,l.swf_path+l.exp_swf,f,n,i)},getFlash:function(){return-1!=navigator.appName.indexOf("Microsoft")?window[t.id]:document[t.id]},setPos:function(){var n,a,r,s,c=i.getScroll(),d=i.getScreen();r=Math.round(l.h>d.h?d.h/5+c.t:(d.h-l.h)/2+c.t),s=Math.round(l.w>d.w?d.w/5+c.l:(d.w-l.w)/2+c.l),n=t.pos.t-1||r,a=t.pos.l||s,o.style.zIndex=t.zIndex||2e4,e.setStyle(o,"position","absolute"),e.setStyle(o,"left",a+"px"),e.setStyle(o,"top",n+"px"),u.autoScroll(c.t,c.t+(n-r))},autoScroll:function(e,t,n){var i,a,r,o,s=8;for(s=n||s,o=e-t,a=[o],a[s]=0,r=1;s>r;r++)a[r]=o/=2;clearInterval(i),i=setInterval(function(){return a.length?void window.scrollTo(0,t+a.shift()):void clearInterval(i)},30)}};return c.show=function(e){return e&&(t.id=e),o&&(o.style.display=""),u.setPos(),this},c.hide=function(){return o&&(o.style.display=""),this},c.setPars=function(e){var t={imageURL:e||"",uploadURL:l.service};return u.getFlash(l.id_swf).editPhoto(t),this},c.getSwf=u.getFlash,c.destroy=function(){if(e.IE){for(key in f)d[f[key]]&&STK.core.util.listener.remove(l.channel,f[key],d[f[key]]);o.innerHTML=""}},u.init(),c}})});