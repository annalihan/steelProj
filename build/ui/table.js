steel.d("utils/kit/extra/language",[],function(t,r,e){STK.register("utils.kit.extra.language",function(t){return window.$LANG||(window.$LANG={}),function(r,e){var n=t.core.util.language(r,$LANG);return n=n.replace(/\\}/gi,"}"),e&&(n=t.templet(n,e)),n}})}),steel.d("utils/kit/dom/parseDOM",[],function(t,r,e){STK.register("utils.kit.dom.parseDOM",function(t){return function(t){for(var r in t)t[r]&&1==t[r].length&&(t[r]=t[r][0]);return t}})}),steel.d("utils/kit/dom/dir",[],function(t,r,e){STK.register("utils.kit.dom.dir",function(t){return function(r,e){e=t.parseParam({dir:"parentNode",expr:void 0,endpoint:document,maxLength:1},e);var n=e.dir,i=e.expr,o=e.endpoint,a=e.maxLength;if(!r||!i)return void t.log("kit dir: node or opts.expr is undefined.");for(var u=[],s=r[n];s&&!(1==s.nodeType&&t.sizzle(i,null,null,[s]).length>0&&(u.push(s),u.length==a))&&s!=o;)s=s[n];return u}})}),steel.d("utils/kit/dom/parents",["utils/kit/dom/dir"],function(t,r,e){t("utils/kit/dom/dir"),STK.register("utils.kit.dom.parents",function(t){return function(r,e){e=t.parseParam({expr:void 0,endpoint:document,maxLength:1},e);var n=e.expr;return r&&n?t.utils.kit.dom.dir(r,e):void t.log("kit parents: node or opts.expr is undefined.")}})}),steel.d("ui/table",["utils/kit/extra/language","utils/kit/dom/parseDOM","utils/kit/dom/parents"],function(t,r,e){t("utils/kit/extra/language"),t("utils/kit/dom/parseDOM"),t("utils/kit/dom/parents"),STK.register("ui.table",function(t){t.utils.kit.extra.language;return function(r){var r,e,n,i,o,a,u,s,l,c={},d={DOM:{},objs:{},DOM_eventFun:{},DeventFun:{},trans:{tr:function(r){var e={html:[]};e.attr=d.trans.trAttr(r);var n=r.match(/<td.*?<\/td>/g);return t.foreach(n,function(t,r){e.html.push(t.replace(/<td.*?>(.*?)<\/td>/g,"$1"))}),e},trAttr:function(r){var e={td:[]},n=r.replace(/<tr(.*?)>.*/,"$1");e.tr=d.trans.getAttr(n);var i=r.match(/<td.*?>/g);return t.foreach(i,function(t,r){t=t.replace(/<td(.*?)>/,"$1"),e.td.push(d.trans.getAttr(t))}),e},getAttr:function(t){t=t.replace(/=(\'|\"|\\\'|\\\")/g,"=").replace(/(\'|\")( |$)/g," "),t=t.replace(/ /g,"&");var r=t?STK.core.json.queryToJson(t):{};return r}},insert:function(t,e){e=e?e:r.rows.length;var n=r.insertRow(e);if("string"==typeof t){var i=n.insertCell(0);return i.innerHTML=t,n}for(var o=0,a=t.length;a>o;++o){var i=n.insertCell(o);i.innerHTML=t[o]}return n},replace:function(t,r){var e=d.getLine(t);d.insertHtml(r,e),d.remove(t)},insertHtml:function(e,n){n=n?n:r.rows.length,e=e.replace(/\n/g,"");var i=e.match(/<tr.*?<\/tr>/);t.foreach(i,function(t,e){var i=d.trans.tr(t),o=r.insertRow(n);for(var a in i.attr.tr)"class"===a?o.className=i.attr.tr[a]:a&&o.setAttribute(a,i.attr.tr[a]);for(var e=0,u=i.html.length;u>e;++e){var s=o.insertCell(e);s.innerHTML=i.html[e];for(var a in i.attr.td[e])"class"===a?s.className=i.attr.td[e][a]:s.setAttribute(a,i.attr.td[e][a])}})},clear:function(){t.foreach(r.rows,function(t,e){r.deleteRow(1)})},remove:function(t){var e=d.getLine(t);r.deleteRow(e)},getLine:function(e){if("TR"!=e.nodeName&&(e=t.utils.kit.dom.parents(e,{expr:"tr"})[0]),e){for(var n,i=0,o=r.rows.length;o>i;i++)r.rows[i]==e&&(n=i);return n}},getLength:function(){return this.table.rows.length}};return e=function(){if(!r)throw new Error("node没有定义")},n=function(){d.DOM=t.utils.kit.dom.parseDOM(t.builder(r).list)},i=function(){},o=function(){},a=function(){},u=function(){},s=function(){d&&(t.foreach(d.objs,function(t){t.destroy&&t.destroy()}),d=null)},l=function(){e(),n(),i(),o(),a(),u()},l(),c.destroy=s,c.getLine=d.getLine,c.insert=d.insert,c.insertHtml=d.insertHtml,c.remove=d.remove,c.replace=d.replace,c.clear=d.clear,c}})});