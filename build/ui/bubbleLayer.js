steel.d("utils/module/layer",[],function(t,e,n){STK.register("utils.module.layer",function(t){var e=function(t){var e={};return"none"==t.style.display?(t.style.visibility="hidden",t.style.display="",e.w=t.offsetWidth,e.h=t.offsetHeight,t.style.display="none",t.style.visibility="visible"):(e.w=t.offsetWidth,e.h=t.offsetHeight),e},n=function(n,i){i=i||"topleft";var r=null;if("none"==n.style.display?(n.style.visibility="hidden",n.style.display="",r=t.core.dom.position(n),n.style.display="none",n.style.visibility="visible"):r=t.core.dom.position(n),"topleft"!==i){var o=e(n);"topright"===i?r.l=r.l+o.w:"bottomleft"===i?r.t=r.t+o.h:"bottomright"===i&&(r.l=r.l+o.w,r.t=r.t+o.h)}return r};return function(i){var r=t.core.dom.builder(i),o=r.list.outer[0],l=r.list.inner[0],s=t.core.dom.uniqueID(o),u={},d=t.core.evt.custEvent.define(u,"show");t.core.evt.custEvent.define(d,"hide");var c=null;return u.show=function(){return o.style.display="",t.core.evt.custEvent.fire(d,"show"),u},u.hide=function(){return o.style.display="none",t.custEvent.fire(d,"hide"),u},u.getPosition=function(t){return n(o,t)},u.getSize=function(t){return(t||!c)&&(c=e.apply(u,[o])),c},u.html=function(t){return void 0!==t&&(l.innerHTML=t),l.innerHTML},u.text=function(e){return void 0!==text&&(l.innerHTML=t.core.str.encodeHTML(e)),t.core.str.decodeHTML(l.innerHTML)},u.appendChild=function(t){return l.appendChild(t),u},u.getUniqueID=function(){return s},u.getOuter=function(){return o},u.getInner=function(){return l},u.getParentNode=function(){return o.parentNode},u.getDomList=function(){return r.list},u.getDomListByKey=function(t){return r.list[t]},u.getDom=function(t,e){return r.list[t]?r.list[t][e||0]:!1},u.getCascadeDom=function(e,n){return r.list[e]?t.core.dom.cascadeNode(r.list[e][n||0]):!1},u}})}),steel.d("ui/bubbleLayer",["utils/module/layer"],function(t,e,n){t("utils/module/layer"),STK.register("ui.bubbleLayer",function(t){var e='<div class="W_layer" node-type="outer" style="display:none;"><div class="bg"><div class="effect"><table cellspacing="0" cellpadding="0" border="0"><tbody><tr><td><div class="content clearfix" node-type="inner"></div></td></tr></tbody></table><div node-type="arrow" class="#{arrow_type}"></div></div></div></div>';return function(n,i){var r,o,l,s,u,d,c=function(t){return t=t?"arrow arrow_"+t:""},a=function(t){return o.style.top=t.t+"px",o.style.left=t.l+"px",s},f=function(){var e=t.core.util.winSize(),n=r.getSize(!0);return o.style.top=t.core.util.scrollPos().top+(e.height-n.h)/2+"px",o.style.left=(e.width-n.w)/2+"px",s},y=function(t){return"string"==typeof t?l.innerHTML=t:l.appendChild(t),s},p=function(t,e){var n="";return"t"===t||"b"===t?"right"===e?n="left:auto;right:30px;":"center"===e&&(n="left:auto;right:"+(o.offsetWidth/2-8)+"px;"):"l"!==t&&"r"!==t||"bottom"!==e||(n="top:auto;bottom:20px;"),u.className=c(t),u.style.cssText=n,s},v=function(){i=c(i),d=e.replace(/\#\{arrow_type\}/g,i),r=t.utils.module.layer(d),o=r.getOuter(),l=r.getDom("inner"),u=r.getDom("arrow"),s=r,n&&y(n),document.body.appendChild(o)};return v(),s.setPostion=a,s.setMiddle=f,s.setContent=y,s.setArrow=p,s}})});