steel.d("utils/module/layer",[],function(t,e,i){STK.register("utils.module.layer",function(t){var e=function(t){var e={};return"none"==t.style.display?(t.style.visibility="hidden",t.style.display="",e.w=t.offsetWidth,e.h=t.offsetHeight,t.style.display="none",t.style.visibility="visible"):(e.w=t.offsetWidth,e.h=t.offsetHeight),e},i=function(i,n){n=n||"topleft";var o=null;if("none"==i.style.display?(i.style.visibility="hidden",i.style.display="",o=t.core.dom.position(i),i.style.display="none",i.style.visibility="visible"):o=t.core.dom.position(i),"topleft"!==n){var s=e(i);"topright"===n?o.l=o.l+s.w:"bottomleft"===n?o.t=o.t+s.h:"bottomright"===n&&(o.l=o.l+s.w,o.t=o.t+s.h)}return o};return function(n){var o=t.core.dom.builder(n),s=o.list.outer[0],r=o.list.inner[0],l=t.core.dom.uniqueID(s),u={},d=t.core.evt.custEvent.define(u,"show");t.core.evt.custEvent.define(d,"hide");var h=null;return u.show=function(){return s.style.display="",t.core.evt.custEvent.fire(d,"show"),u},u.hide=function(){return s.style.display="none",t.custEvent.fire(d,"hide"),u},u.getPosition=function(t){return i(s,t)},u.getSize=function(t){return(t||!h)&&(h=e.apply(u,[s])),h},u.html=function(t){return void 0!==t&&(r.innerHTML=t),r.innerHTML},u.text=function(e){return void 0!==text&&(r.innerHTML=t.core.str.encodeHTML(e)),t.core.str.decodeHTML(r.innerHTML)},u.appendChild=function(t){return r.appendChild(t),u},u.getUniqueID=function(){return l},u.getOuter=function(){return s},u.getInner=function(){return r},u.getParentNode=function(){return s.parentNode},u.getDomList=function(){return o.list},u.getDomListByKey=function(t){return o.list[t]},u.getDom=function(t,e){return o.list[t]?o.list[t][e||0]:!1},u.getCascadeDom=function(e,i){return o.list[e]?t.core.dom.cascadeNode(o.list[e][i||0]):!1},u}})}),steel.d("ui/tipPrototype",["utils/module/layer"],function(t,e,i){t("utils/module/layer"),STK.register("ui.tipPrototype",function(t){var e=10003;return function(i){var n,o,s,r,l,u='<div node-type="outer" style="position: absolute; clear: both; display:none;overflow:hidden;z-index:10003;" ><div node-type="inner" ></div></div>';return n=t.parseParam({direct:"up",showCallback:t.core.func.empty,hideCallback:t.core.func.empty},i),o=t.utils.module.layer(u,n),s=o.getOuter(),r=o.getInner(),o.setTipWH=function(){return l=this.getSize(!0),this.tipWidth=l.w,this.tipHeight=l.h,this},o.setTipWH(),o.setContent=function(t){return"string"==typeof t?r.innerHTML=t:r.appendChild(t),this.setTipWH(),this},o.setLayerXY=function(i){if(!i)throw"ui.tipPrototype need pNode as first parameter to set tip position";var o=STK.core.dom.position(i),r=o.l,l=i.offsetWidth,u=i.offsetHeight,d=Math.min(Math.max(r+(l-this.tipWidth)/2,t.scrollPos().left),t.scrollPos().left+STK.winSize().width-this.tipWidth),h=o.t;"down"===n.direct&&(h+=u);var a=[";"];a.push("z-index:",e++,";"),a.push("width:",this.tipWidth,"px;"),a.push("height:",this.tipHeight,"px;"),a.push("top:",h,"px;"),a.push("left:",d,"px;"),s.style.cssText+=a.join("")},o.aniShow=function(){var e=this.getOuter();e.style.height="0px",e.style.display="";var i=t.core.ani.tween(e,{end:n.showCallback,duration:250,animationType:"easeoutcubic"});if("down"===n.direct)i.play({height:this.tipHeight},{staticStyle:"overflow:hidden;position:absolute;"});else{var o=parseInt(e.style.top,10)-this.tipHeight;i.play({height:this.tipHeight,top:Math.max(o,t.scrollPos().top)},{staticStyle:"overflow:hidden;position:absolute;"})}},o.anihide=function(){var e=this.getOuter(),i=this,o=t.core.ani.tween(e,{end:function(){e.style.display="none",e.style.height=i.tipHeight+"px",n.hideCallback()},duration:300,animationType:"easeoutcubic"});if("down"===n.direct)o.play({height:0},{staticStyle:"overflow:hidden;position:absolute;"});else{var s=parseInt(e.style.top,10)+this.tipHeight;o.play({height:0,top:s},{staticStyle:"overflow:hidden;position:absolute;"})}},document.body.appendChild(s),o.destroy=function(){document.body.removeChild(s),o=null},o}})});