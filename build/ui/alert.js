steel.d("utils/kit/extra/language",[],function(e,t,n){STK.register("utils.kit.extra.language",function(e){return window.$LANG||(window.$LANG={}),function(t,n){var i=e.core.util.language(t,$LANG);return i=i.replace(/\\}/gi,"}"),n&&(i=e.templet(i,n)),i}})}),steel.d("utils/kit/extra/reuse",[],function(e,t,n){STK.register("utils.kit.extra.reuse",function(e){return function(t,n){var i,o,r;i=e.parseParam({},n),r=[];var u=function(){var e=t();return r.push({store:e,used:!0}),e},s=function(t){e.foreach(r,function(e,n){return t===e.store?(e.used=!0,!1):void 0})},l=function(t){e.foreach(r,function(e,n){return t===e.store?(e.used=!1,!1):void 0})},d=function(){for(var e=0,t=r.length;t>e;e+=1)if(r[e].used===!1)return r[e].used=!0,r[e].store;return u()};return o={},o.setUsed=s,o.setUnused=l,o.getOne=d,o.getLength=function(){return r.length},o}})}),steel.d("utils/module/layer",[],function(e,t,n){STK.register("utils.module.layer",function(e){var t=function(e){var t={};return"none"==e.style.display?(e.style.visibility="hidden",e.style.display="",t.w=e.offsetWidth,t.h=e.offsetHeight,e.style.display="none",e.style.visibility="visible"):(t.w=e.offsetWidth,t.h=e.offsetHeight),t},n=function(n,i){i=i||"topleft";var o=null;if("none"==n.style.display?(n.style.visibility="hidden",n.style.display="",o=e.core.dom.position(n),n.style.display="none",n.style.visibility="visible"):o=e.core.dom.position(n),"topleft"!==i){var r=t(n);"topright"===i?o.l=o.l+r.w:"bottomleft"===i?o.t=o.t+r.h:"bottomright"===i&&(o.l=o.l+r.w,o.t=o.t+r.h)}return o};return function(i){var o=e.core.dom.builder(i),r=o.list.outer[0],u=o.list.inner[0],s=e.core.dom.uniqueID(r),l={},d=e.core.evt.custEvent.define(l,"show");e.core.evt.custEvent.define(d,"hide");var c=null;return l.show=function(){return r.style.display="",e.core.evt.custEvent.fire(d,"show"),l},l.hide=function(){return r.style.display="none",e.custEvent.fire(d,"hide"),l},l.getPosition=function(e){return n(r,e)},l.getSize=function(e){return(e||!c)&&(c=t.apply(l,[r])),c},l.html=function(e){return void 0!==e&&(u.innerHTML=e),u.innerHTML},l.text=function(t){return void 0!==text&&(u.innerHTML=e.core.str.encodeHTML(t)),e.core.str.decodeHTML(u.innerHTML)},l.appendChild=function(e){return u.appendChild(e),l},l.getUniqueID=function(){return s},l.getOuter=function(){return r},l.getInner=function(){return u},l.getParentNode=function(){return r.parentNode},l.getDomList=function(){return o.list},l.getDomListByKey=function(e){return o.list[e]},l.getDom=function(e,t){return o.list[e]?o.list[e][t||0]:!1},l.getCascadeDom=function(t,n){return o.list[t]?e.core.dom.cascadeNode(o.list[t][n||0]):!1},l}})}),steel.d("utils/module/dialog",["utils/module/layer"],function(e,t,n){e("utils/module/layer"),STK.register("utils.module.dialog",function(e){return function(t,n){if(!t)throw"module.dialog need template as first parameter";var i,o,r,u,s,l,d,c,a,f,p,g;a=!0;var h=function(){a!==!1&&o.hide()},m=function(){i=e.parseParam({t:null,l:null,width:null,height:null},n),o=e.utils.module.layer(t,i),u=o.getOuter(),s=o.getDom("title"),c=o.getDom("title_content"),l=o.getDom("inner"),d=o.getDom("close"),e.addEvent(d,"click",function(){p()}),e.custEvent.add(o,"show",function(){e.hotKey.add(document.documentElement,["esc"],h,{type:"keyup",disableInInput:!0})}),e.custEvent.add(o,"hide",function(){e.hotKey.remove(document.documentElement,["esc"],h,{type:"keyup"}),a=!0})};return m(),g=e.objSup(o,["show","hide"]),p=function(t){return"function"!=typeof f||t||f()!==!1?(g.hide(),e.contains(document.body,o.getOuter())&&document.body.removeChild(o.getOuter()),r):!1},r=o,r.show=function(){return e.contains(document.body,o.getOuter())||document.body.appendChild(o.getOuter()),g.show(),r},r.hide=p,r.setPosition=function(e){return u.style.top=e.t+"px",u.style.left=e.l+"px",r},r.setMiddle=function(){var t,n=e.core.util.winSize(),i=o.getSize(!0);if(window.FrameInner&&window.FrameInner.outInfo){var s=FrameInner.outInfo;"string"==typeof s&&(s=e.strToJson(s));var l=s.parent.scroll.top,d=s.iframe.position.top,c=s.parent.size.height;t=l-d+(c-i.h)/2;var a=n.height-i.h;t>a&&(t=a)}else t=e.core.util.scrollPos().top+(n.height-i.h)/2;return u.style.top=(parseInt(t)>30?t:30)+"px",u.style.left=(n.width-i.w)/2+"px",window.FrameInner&&FrameInner.diaAutoHeight&&FrameInner.diaAutoHeight(u),r},r.setTitle=function(e){return c.innerHTML=e,r},r.setContent=function(e){return"string"==typeof e?l.innerHTML=e:l.appendChild(e),r},r.clearContent=function(){for(;l.children.length;)e.removeNode(l.children[0]);return r},r.setAlign=function(){},r.setBeforeHideFn=function(e){f=e},r.clearBeforeHideFn=function(){f=null},r.unsupportEsc=function(){a=!1},r.supportEsc=function(){a=!0},r}})}),steel.d("utils/kit/dom/cssText",[],function(e,t,n){STK.register("utils.kit.dom.cssText",function(e){var t=function(e,t){for(var n,i=(e+";"+t).replace(/(\s*(;)\s*)|(\s*(:)\s*)/g,"$2$4");i&&(n=i.match(/(^|;)([\w\-]+:)([^;]*);(.*;)?\2/i));)i=i.replace(n[1]+n[2]+n[3],"");return i};return function(e){e=e||"";var n=[],i={push:function(e,t){return n.push(e+":"+t),i},remove:function(e){for(var t=0;t<n.length;t++)0==n[t].indexOf(e+":")&&n.splice(t,1);return i},getStyleList:function(){return n.slice()},getCss:function(){return t(e,n.join(";"))}};return i}})}),steel.d("utils/kit/dom/fix",["utils/kit/dom/cssText"],function(e,t,n){e("utils/kit/dom/cssText"),STK.register("utils.kit.dom.fix",function(e){function t(t){return"none"!=e.core.dom.getStyle(t,"display")}function n(t){t=e.core.arr.isArray(t)?t:[0,0];for(var n=0;2>n;n++)"number"!=typeof t[n]&&(t[n]=0);return t}function i(n,i,r){if(t(n)){var u,s,l,d,c="fixed",a=n.offsetWidth,f=n.offsetHeight,p=e.core.util.winSize(),g=0,h=0,m=e.utils.kit.dom.cssText(n.style.cssText);if(o)switch(u=d=r[1],s=l=r[0],i){case"lt":d=l="";break;case"lb":u=l="";break;case"rt":s=d="";break;case"rb":u=s="";break;case"c":default:u=(p.height-f)/2+r[1],s=(p.width-a)/2+r[0],d=l=""}else{c="absolute";var v=e.core.util.scrollPos();switch(g=u=v.top,h=s=v.left,i){case"lt":u+=r[1],s+=r[0];break;case"lb":u+=p.height-f-r[1],s+=r[0];break;case"rt":u+=r[1],s+=p.width-a-r[0];break;case"rb":u+=p.height-f-r[1],s+=p.width-a-r[0];break;case"c":default:u+=(p.height-f)/2+r[1],s+=(p.width-a)/2+r[0]}l=d=""}"c"==i&&(g>u&&(u=g),h>s&&(s=h)),m.push("position",c).push("top",u+"px").push("left",s+"px").push("right",l+"px").push("bottom",d+"px"),n.style.cssText=m.getCss()}}var o=!(e.core.util.browser.IE6||"CSS1Compat"!==document.compatMode&&STK.IE),r=/^(c)|(lt)|(lb)|(rt)|(rb)$/;return function(t,u,s){function l(n){n=n||window.event,e.core.evt.custEvent.fire(a,"beforeFix",n.type),!f||o&&"c"!=d||i(t,d,c)}var d,c,a,f=!0;if(e.core.dom.isNode(t)&&r.test(u)){var p={getNode:function(){return t},isFixed:function(){return f},setFixed:function(e){return(f=!!e)&&i(t,d,c),this},setAlign:function(e,o){return r.test(e)&&(d=e,c=n(o),f&&i(t,d,c)),this},destroy:function(){o||o&&e.core.evt.removeEvent(window,"scroll",l),e.core.evt.removeEvent(window,"resize",l),e.core.evt.custEvent.undefine(a)}};return a=e.core.evt.custEvent.define(p,"beforeFix"),p.setAlign(u,s),o||e.core.evt.addEvent(window,"scroll",l),e.core.evt.addEvent(window,"resize",l),p}}})}),steel.d("utils/module/mask",["utils/kit/dom/fix"],function(e,t,n){e("utils/kit/dom/fix"),STK.register("utils.module.mask",function(e){function t(){i=e.C("div");var t='<div node-type="outer">';e.core.util.browser.IE6&&(t+='<div style="position:absolute;width:100%;height:100%;"></div>'),t+="</div>",i=e.builder(t).list.outer[0],document.body.appendChild(i),u=!0,o=e.utils.kit.dom.fix(i,"lt");var n=function(){var t=e.core.util.winSize();i.style.cssText=e.utils.kit.dom.cssText(i.style.cssText).push("width",t.width+"px").push("height",t.height+"px").getCss()};c.add(o,"beforeFix",n),n()}function n(t){var n;return(n=t.getAttribute(s))||t.setAttribute(s,n=e.getUniqueKey()),">"+t.tagName.toLowerCase()+"["+s+'="'+n+'"]'}var i,o,r=[],u=!1,s="STK-Mask-Key",l=e.core.dom.setStyle,d=e.core.dom.getStyle,c=e.core.evt.custEvent,a={getNode:function(){return i},show:function(n,r){return u?(n=e.core.obj.parseParam({opacity:0,background:"#000000"},n),i.style.background=n.background,l(i,"opacity",n.opacity),i.style.opacity=n.opacity,i.style.display="",o.setAlign("lt"),r&&r()):e.Ready(function(){t(),a.show(n,r)}),a},hide:function(){return i.style.display="none",nowIndex=void 0,r=[],a},showUnderNode:function(t,o){return e.isNode(t)&&a.show(o,function(){l(i,"zIndex",d(t,"zIndex"));var o=n(t),u=e.core.arr.indexOf(r,o);-1!=u&&r.splice(u,1),r.push(o),e.core.dom.insertElement(t,i,"beforebegin")}),a},back:function(){if(r.length<1)return a;var t,n;return r.pop(),r.length<1?a.hide():(n=r[r.length-1])&&(t=e.sizzle(n,document.body)[0])?(l(i,"zIndex",d(t,"zIndex")),e.core.dom.insertElement(t,i,"beforebegin")):a.back(),a},destroy:function(){c.remove(o),i.style.display="none",lastNode=void 0,_cache={}}};return a})}),steel.d("utils/kit/dom/drag",[],function(e,t,n){STK.register("utils.kit.dom.drag",function(e){return function(t,n){var i,o,r,u,s,l,d,c,a=function(){f(),p()},f=function(){i=e.parseParam({moveDom:t,perchStyle:"border:solid #999999 2px;",dragtype:"perch",actObj:{},pagePadding:5},n),r=i.moveDom,o={},u={},s=e.drag(t,{actObj:i.actObj}),"perch"===i.dragtype&&(l=e.C("div"),d=!1,c=!1,r=l),t.style.cursor="move"},p=function(){e.custEvent.add(i.actObj,"dragStart",g),e.custEvent.add(i.actObj,"dragEnd",h),e.custEvent.add(i.actObj,"draging",m)},g=function(n,o){document.body.style.cursor="move";var r=e.core.util.pageSize().page;if(u=e.core.dom.position(i.moveDom),u.pageX=o.pageX,u.pageY=o.pageY,u.height=i.moveDom.offsetHeight,u.width=i.moveDom.offsetWidth,u.pageHeight=r.height,u.pageWidth=r.width,"perch"===i.dragtype){var s=[];s.push(i.perchStyle),s.push("position:absolute"),s.push("z-index:"+(i.moveDom.style.zIndex+10)),s.push("width:"+i.moveDom.offsetWidth+"px"),s.push("height:"+i.moveDom.offsetHeight+"px"),s.push("left:"+u.l+"px"),s.push("top:"+u.t+"px"),l.style.cssText=s.join(";"),c=!0,setTimeout(function(){c&&(document.body.appendChild(l),d=!0)},100)}void 0!==t.setCapture&&t.setCapture()},h=function(e,n){document.body.style.cursor="auto",void 0!==t.setCapture&&t.releaseCapture(),"perch"===i.dragtype&&(c=!1,i.moveDom.style.top=l.style.top,i.moveDom.style.left=l.style.left,d&&(document.body.removeChild(l),d=!1))},m=function(e,t){var n=u.t+(t.pageY-u.pageY),o=u.l+(t.pageX-u.pageX),s=n+u.height,l=o+u.width,d=u.pageHeight-i.pagePadding,c=u.pageWidth-i.pagePadding;d>s&&n>0?r.style.top=n+"px":(0>n&&(r.style.top="0px"),s>=d&&(r.style.top=d-u.height+"px")),c>l&&o>0?r.style.left=o+"px":(0>o&&(r.style.left="0px"),l>=c&&(r.style.left=c-u.width+"px"))};return a(),o.destroy=function(){document.body.style.cursor="auto","function"==typeof r.setCapture&&r.releaseCapture(),"perch"===i.dragtype&&(c=!1,d&&(document.body.removeChild(l),d=!1)),e.custEvent.remove(i.actObj,"dragStart",g),e.custEvent.remove(i.actObj,"dragEnd",h),e.custEvent.remove(i.actObj,"draging",m),s.destroy&&s.destroy(),i=null,r=null,u=null,s=null,l=null,d=null,c=null},o.getActObj=function(){return i.actObj},o}})}),steel.d("ui/dialog",["utils/kit/extra/language","utils/kit/extra/reuse","utils/module/dialog","utils/module/mask","utils/kit/dom/drag"],function(e,t,n){e("utils/kit/extra/language"),e("utils/kit/extra/reuse"),e("utils/module/dialog"),e("utils/module/mask"),e("utils/kit/dom/drag"),STK.register("ui.dialog",function(e){var t='<div class="W_layer" node-type="outer" style="display:none;position:absolute;z-index:10019"><div class="content"><div class="W_layer_title" node-type="title_content"></div><div class="W_layer_close"><a href="javascript:void(0);" class="W_ficon ficon_close S_ficon" title="#L{关闭}" node-type="close">X</a></div><div node-type="inner"></div></div></div>',n=e.utils.kit.extra.language,i=null,o=function(){var i=e.utils.module.dialog(n(t));return e.custEvent.add(i,"show",function(){e.utils.module.mask.showUnderNode(i.getOuter(),{opacity:.5,background:"#000000"})}),e.custEvent.add(i,"hide",function(){e.utils.module.mask.back(),i.setMiddle()}),i.destroy=function(){r(i);try{i.hide(!0)}catch(e){}},i},r=function(e){e.setTitle("").clearContent(),i.setUnused(e)};return function(t){var n=e.parseParam({isHold:!1},t),u=n.isHold;n=e.core.obj.cut(n,["isHold"]),i||(i=e.utils.kit.extra.reuse(o));var s=i.getOne();return u||(e.custEvent.add(s,"hide",function(){e.custEvent.remove(s,"hide",arguments.callee),r(s)}),e.custEvent.add(s,"show",function(){i.setUsed(s)})),s}})}),steel.d("ui/alert",["utils/kit/extra/language","utils/kit/extra/reuse","utils/module/layer","ui/dialog"],function(e,t,n){e("utils/kit/extra/language"),e("utils/kit/extra/reuse"),e("utils/module/layer"),e("ui/dialog"),STK.register("ui.alert",function(e){var t,n='<div node-type="outer"><div class="layer_point" node-type="inner"><dl class="point clearfix"><dt><span class="W_icon" node-type="icon"></span></dt><dd><p class="W_f14" node-type="text"></p></dd></dl></div><div class="W_layer_btn S_bg1"><a class="W_btn_a btn_34px" href="javascript:;" node-type="OK"><span></span></a></div></div>',i={success:"W_icon icon_succB",error:"W_icon icon_rederrorB",warn:"W_icon icon_warnB",question:"W_icon icon_askB"},o=e.utils.kit.extra.language,r=null,u=function(e,t){e.getDom("icon").className=t.icon,e.getDom("text").innerHTML=t.text,e.getDom("OK").innerHTML=t.OKText};return function(s,l){t&&(t.dia.hide(),t=null);var d,c,a,f,p;return d=e.parseParam({title:o("#L{提示}"),icon:"warn",text:s,OK:e.funcEmpty,OKText:o("#L{确定}"),timeout:0},l),d.icon=i[d.icon],c={},r||(r=e.utils.kit.extra.reuse(function(){var t=e.utils.module.layer(o(n));return t})),a=r.getOne(),f=e.ui.dialog(),f.setContent(a.getOuter()),f.setTitle(d.title),u(a,d),e.addEvent(a.getDom("OK"),"click",f.hide),e.custEvent.add(f,"hide",function(){e.custEvent.remove(f,"hide",arguments.callee),e.removeEvent(a.getDom("OK"),"click",f.hide),r.setUnused(a),clearTimeout(p),d.OK()}),d.timeout&&(p=setTimeout(f.hide,d.timeout)),f.show().setMiddle(),c.alt=a,c.dia=f,t=c,c}})});