steel.d("utils/module/layer",[],function(t,e,i){STK.register("utils.module.layer",function(t){var e=function(t){var e={};return"none"==t.style.display?(t.style.visibility="hidden",t.style.display="",e.w=t.offsetWidth,e.h=t.offsetHeight,t.style.display="none",t.style.visibility="visible"):(e.w=t.offsetWidth,e.h=t.offsetHeight),e},i=function(i,n){n=n||"topleft";var r=null;if("none"==i.style.display?(i.style.visibility="hidden",i.style.display="",r=t.core.dom.position(i),i.style.display="none",i.style.visibility="visible"):r=t.core.dom.position(i),"topleft"!==n){var o=e(i);"topright"===n?r.l=r.l+o.w:"bottomleft"===n?r.t=r.t+o.h:"bottomright"===n&&(r.l=r.l+o.w,r.t=r.t+o.h)}return r};return function(n){var r=t.core.dom.builder(n),o=r.list.outer[0],s=r.list.inner[0],l=t.core.dom.uniqueID(o),a={},d=t.core.evt.custEvent.define(a,"show");t.core.evt.custEvent.define(d,"hide");var u=null;return a.show=function(){return o.style.display="",t.core.evt.custEvent.fire(d,"show"),a},a.hide=function(){return o.style.display="none",t.custEvent.fire(d,"hide"),a},a.getPosition=function(t){return i(o,t)},a.getSize=function(t){return(t||!u)&&(u=e.apply(a,[o])),u},a.html=function(t){return void 0!==t&&(s.innerHTML=t),s.innerHTML},a.text=function(e){return void 0!==text&&(s.innerHTML=t.core.str.encodeHTML(e)),t.core.str.decodeHTML(s.innerHTML)},a.appendChild=function(t){return s.appendChild(t),a},a.getUniqueID=function(){return l},a.getOuter=function(){return o},a.getInner=function(){return s},a.getParentNode=function(){return o.parentNode},a.getDomList=function(){return r.list},a.getDomListByKey=function(t){return r.list[t]},a.getDom=function(t,e){return r.list[t]?r.list[t][e||0]:!1},a.getCascadeDom=function(e,i){return r.list[e]?t.core.dom.cascadeNode(r.list[e][i||0]):!1},a}})}),steel.d("ui/select",["utils/module/layer"],function(t,e,i){t("utils/module/layer"),STK.register("ui.select",function(t){var e='<#et temp data><div style="position: absolute; z-index: 100010; display: none;" class="layer_menu_list" node-type="outer"><ul class="scroll_bar" node-type="inner"><#list data.list as item><#if (data.current_id == item.id) ><li class="cur"><a href="javascript:;" action-type="item" action-data="id=${item.id}" style="padding-right: 20px;">${item.name}</a></li></#if><#if (data.current_id != item.id) ><li><a href="javascript:;" action-type="item" action-data="id=${item.id}" style="padding-right: 20px;">${item.name}</a></li></#if></#list></ul></div></#et>';return function(i){var n,r,o,s,l,a={},d=t.core.util.easyTemplate,n=t.parseParam({dataList:[],target:{},stopLayerClose:!1,current_id:"-1"},i);a.list=n.dataList,a.current_id=n.current_id;var u=d(e,a).toString();r={},o=t.utils.module.layer(u),s=o.getOuter(),l=t.delegatedEvent(s),t.custEvent.define(r,"ok");var c=function(e){if(!n.stopLayerClose){var i=t.fixEvent(e);t.contains(s,i.target)||o.hide()}};t.custEvent.add(o,"hide",function(){t.custEvent.remove(o,"hide",arguments.callee),t.removeEvent(document.body,"click",c),l.remove("item","click"),s.parentNode.removeChild(s)}),t.custEvent.add(o,"show",function(){document.body.appendChild(s),setTimeout(function(){t.addEvent(document.body,"click",c)},0)}),l.add("item","click",function(e){var i=e.data.id,n=e.el.innerHTML;t.custEvent.fire(r,"ok",{id:i,name:n}),o.hide()}),o.show();var f=t.core.dom.position(n.target);return s.style.top=f.t+30+"px",s.style.left=f.l+"px",r.stopLayerClose=function(){return n.stopLayerClose=!0,r},r.startLayerClose=function(){return n.stopLayerClose=!1,r},r.setPosition=function(t){return s.style.top=t.t+"px",s.style.left=t.l+"px",r},r.layer=o,r}})});