steel.d("utils/ui",[],function(t,e,n){STK.register("utils.ui",function(t){return function(e){function n(e,n,o,i,r){var u={duration:n,onComplete:r};return void 0!==o&&(u.opacity=o),i&&(u.scale=i,u.origin="0 0"),t.animate(e,u),h}function o(t){t.preventDefault(),s()}function i(){var e=t.getSize(window);t.setStyle(d,{width:e.w,height:e.h}),t.on(d,"touchstart",o),document.body.appendChild(d)}function r(){t.off(d,"touchstart"),t.removeNode(d)}function u(){return h.showFlag?h:(h.showFlag=!0,document.body.appendChild(a),t.setStyle(a,"z-index",10001),t.on(a,"touchmove",f),c&&i(),e.show&&e.show(h),h)}function s(){return h.showFlag=!1,document.body.removeChild(a),t.off(a,"touchmove",f),c&&r(),e.hide&&e.hide(h),h}if(e=t.parseParam({tpl:"",show:t.empty,hide:t.empty},e),!e.tpl)throw"utils.ui need a tpl param!";var l=t.builder(e.tpl),a=l.list.outer[0],d=t.fragment('<div style="position:fixed;left:0px;top:0px;z-index:10000;opacity:0;background-color:#000;"></div>')[0],c=!0,f=function(t){t.preventDefault()},h={};return h.addMask=function(){return t.removeNode(d),i(),h},h.removeMask=function(){return c=!1,t.removeNode(d),h},h.setMaskStyle=function(e,n){return t.setStyle(d,e,n),h},h.show=u,h.hide=s,h.refresh=function(){if(c){var e=t.getSize(window);t.setStyle(d,{position:"fixed",left:"0px",top:"0px",width:e.w,height:e.h})}return h},h.fadeIn=function(e,o,i,r){var s,l=t.slice(arguments,0,4),r=l.pop();return t.isFunction(r)||(l.push(r),r=void 0),s=a.style.opacity,t.setStyle(a,"opacity",0),s||(s=l[1]||1),u(),n(a,l[0],s,l[2],r),h},h.fadeOut=function(e,o,i,r){var u=t.slice(arguments,0,4),r=u.pop();return t.isFunction(r)||(u.push(r),r=null),o=u[1]||0,n(a,u[0],o,u[2],function(){s(),r&&r.call(a)}),h},h.getPosition=function(e){var n=t.core.dom.position(el),o=getSize(el),e=e||"topleft";switch(e){case"topright":n.l=n.l+o.w;break;case"bottomleft":n.t=n.t+o.h;break;case"bottomright":n.l=n.l+o.w,n.t=n.t+o.h;break;default:return{}}return n},h.getSize=function(){var t={};return t.w=a.offsetWidth,t.h=a.offsetHeight,t},h.appendChild=function(t){return a.appendChild(t),h},h.getOuter=function(){return a},h.getParentNode=function(){return a.parentNode},h.getDomList=function(){for(var t in l.list)l.list[t]&&1==l.list[t].length&&(l.list[t]=l.list[t][0]);return l.list},h.setPosition=function(e){return t.setStyle(a,e),h},h.setMiddle=function(){var e=h.getSize(),n=t.getSize(window),o=t.scrollPos().t+(n.h-e.h)/2;return h.setPosition({top:parseInt(o)>30?o:30,left:(n.w-e.w)/2}),h},h}})});