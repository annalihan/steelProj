steel.d("utils/kit/dom/isTurnoff",[],function(e,t,r){STK.register("utils.kit.dom.isTurnoff",function(e){return function(e){return!(e.parentNode&&11!=e.parentNode.nodeType&&!e.disabled)}})}),steel.d("utils/kit/extra/textareaUtils",["utils/kit/dom/isTurnoff"],function(e,t,r){e("utils/kit/dom/isTurnoff"),STK.register("utils.kit.extra.textareaUtils",function(e){var t={},r=document.selection;return t.selectionStart=function(e){if(!r)try{return e.selectionStart}catch(t){return 0}var n=r.createRange(),l=0,c=document.body.createTextRange();for(c.moveToElementText(e),l;c.compareEndPoints("StartToStart",n)<0;l++)c.moveStart("character",1);return l},t.selectionBefore=function(e){return e.value.slice(0,t.selectionStart(e))},t.selectText=function(e,t,n){if(e.focus(),!r)return void e.setSelectionRange(t,n);var l=e.createTextRange();l.collapse(1),l.moveStart("character",t),l.moveEnd("character",n-t),l.select()},t.insertText=function(e,n,l,c){if(e.focus(),c=c||0,!r){var o=e.value,a=l-c,s=a+n.length;return e.value=o.slice(0,a)+n+o.slice(l,o.length),void t.selectText(e,s,s)}var i=r.createRange();i.moveStart("character",-c),i.text=n},t.replaceText=function(e,n){e.focus();var l=e.value,c=t.getSelectedText(e),o=c.length;if(0==c.length)t.insertText(e,n,t.getCursorPos(e));else{var a=t.getCursorPos(e);if(!r){{a+c.length}return e.value=l.slice(0,a)+n+l.slice(a+o,l.length),void t.setCursor(e,a+n.length)}var s=r.createRange();s.text=n,t.setCursor(e,a+n.length)}},t.getCursorPos=function(e){var t=0;if(STK.core.util.browser.IE&&!STK.core.util.browser.IE9){!e.disabled&&e.focus();var n=null;n=r.createRange();var l=n.duplicate();l.moveToElementText(e),l.setEndPoint("EndToEnd",n),e.selectionStart=l.text.length-n.text.length,e.selectionEnd=e.selectionStart+n.text.length,t=e.selectionStart}else(e.selectionStart||"0"==e.selectionStart)&&(t=e.selectionStart);return t},t.getSelectedText=function(e){var t="",n=function(e){return void 0!=e.selectionStart&&void 0!=e.selectionEnd?e.value.substring(e.selectionStart,e.selectionEnd):""};return t=window.getSelection?n(e):r.createRange().text},t.setCursor=function(e,t,r){if(t=null==t?e.value.length:t,r=null==r?0:r,!e.disabled&&e.focus(),e.createTextRange){var n=e.createTextRange();n.move("character",t),n.moveEnd("character",r),n.select()}else e.setSelectionRange(t,t+r)},t.unCoverInsertText=function(e,t,r){r=null==r?{}:r,r.rcs=null==r.rcs?e.value.length:1*r.rcs,r.rccl=null==r.rccl?0:1*r.rccl;var n=e.value,l=n.slice(0,r.rcs),c=n.slice(r.rcs+r.rccl,""==n?0:n.length);e.value=l+t+c,this.setCursor(e,r.rcs+(null==t?0:t.length))},t})});