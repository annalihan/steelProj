steel.d("utils/module/calendar",[],function(t,e,r){STK.register("utils.module.calendar",function(t){var e={toInt:function(t){return"number"==typeof t?t:parseInt(t,10)},getMaxDay:function(e){var r=e.getMonth()+1;if(2==r){var a=e.getFullYear();return a%4==0&&a%100!=0||a%400==0?29:28}return-1!=t.core.arr.indexOf(r,[4,6,9,11])?30:31},parseParam:function(t){var e;if(3===t.length)t[0]=this.toInt(t[0]),t[1]=this.toInt(t[1]),t[2]=this.toInt(t[2]),e=new Date(t[0],t[1]-1,t[2]);else if(t=t[0],"string"==typeof t){if(!/^\d{4}\-\d{1,2}\-\d{1,2}$/.test(t))throw"请传入正确的日期";var r=t.split("-");r[0]=this.toInt(r[0]),r[1]=this.toInt(r[1]),r[2]=this.toInt(r[2]),e=new Date(r[0],r[1]-1,r[2])}else e=t;return e},getFirstDay:function(t){var e=new Date(t.getFullYear(),t.getMonth(),t.getDate());return e.setDate(1),e.getDay()},parseData:function(){var t,e=arguments,r=this.parseParam(e),a=this.getMaxDay(r),n=this.getFirstDay(r);t=0==n&&28==a?28:n+a>35?42:35;for(var s=[],i=0;n>i;i++)s.push("");for(var i=1;a>=i;i++)s.push(i);for(var u=0,i=1;t-a-n>=i;i++)u++,s.push("");var o=r.getFullYear(),l=r.getMonth()+1;return 10>l&&(l="0"+l),{firstDay:n,result:s,leftDay:u,prefix:o+"-"+l+"-"}},parseHTML:function(e,r,a){t.isArray(e)||(e=[e]);for(var n=this.parseData.apply(this,e),s=n.firstDay,i=n.result,u=0;u<i.length;u++)i[u]?r[u]._day_=i[u]:s>u?r.unshift({_day_:""}):r.push({_day_:""});return t.core.util.easyTemplate(a,r)},parseMapHtml:function(e,r,a){t.isArray(e)||(e=[e]);for(var n=this.parseData.apply(this,e),s=n.firstDay,i=[],u=n.result,o=0;o<u.length;o++)if(u[o]){var l=o-s+1,f=n.prefix+(10>l?"0"+l:l);r[f]?(r[f]._day_=l,i[o]=r[f]):i[o]={_day_:l}}else s>o?i.unshift({_day_:""}):i.push({_day_:""});return t.core.util.easyTemplate(a,i)}};return e})});